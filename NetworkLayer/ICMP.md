											# ICMP #


1.ICMP(Internet Control Message Protocol,网络控制报文协议)

(1) 作用：为了更有效的转发IP数据报和提高交付成功的机会

(2) 当遇到IP数据无法访问目标、IP路由器无法按当前的传输速率转发数据包等情况时，会自动发送ICMP消息

(3) 报文类型：差错报告报文和询问报文

差错报告报文：
a.终点不可达：不能交付数据报时向源点发送
b.源点抑制：当路由器或主机由于拥塞而丢弃数据，发送该报文通知源点将数据报发送速率放慢
c.时间超过：TTL将为0，丢弃数据的同时发送该报文
d.参数问题：首部字段不正确，丢弃数据，发送该报文
e.改变路由：让主机知道下次应将数据报发送给另外的更好的路由器

询问报文：
a.回送请求和应答：主机向目的主机发送回送请求报文，目的主机向源主机发送应答报文，用来测试目的主机站是否可达以及了解其状态
b.时间戳请求和应答：用于时钟同步和测量时间。

(4) 应用：分组网间探测ping，用来测试两个主机之间的连通性，采用ICMP回送请求和应答报文，PING是应用层直接使用网络层ICMP的一个例子，没有通过网络层TCP和UDP
