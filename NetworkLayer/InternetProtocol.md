# Internet Protocol


**1. IP数据报的格式**

![](../images/48.png)

```
(1) 版本号：IP协议的版本
(2) 首部长度：常用首部长度为20个字节
(3) 区分服务：一般不使用这个字段
(4) 数据报总长度：首部和数据之和，占16位，表示最大长度为65535字节,由于MTU限制，一般不超过1500
字节。另外数据报的总长度不是指未分片前的数据报总长度，而是指分片后的每一片的首部+数据的长度
(5) 标识：标识字段由计数器产生，每产生一个数据报就加1，数据报分片后标识段也被复制到各个分片中，
以便重装成原来的数据报。
(6) 标志：三位，最低位记为MF，MF=1代表还有分片，反之则没有；中间一位记为DF，DF=1代表不允许分
片，反之则允许分片
(7) 片偏移：分片后的该片在原分组中的相对位置。单位为8个字节，分片的长度都是8自己的倍数；
(9) 生存时间(TTL)：数据报在网络中的寿命。防止无法交付的数据报无限制地在网络中兜圈子。每经过一个
路由器，TTL就减去数据报在该路由器中消耗的时间，TTL为0就丢弃该报。
(10) 协议：指携带的数据时何种协议。常用协议字段：1-ICMP，2-IGMP，6-TCP，8-EGP，17-UDP，41-
IPv6等等
(11) 首部检验和：IP校验和只校验IP首部，不包含数据
(12)源地址和目的地址：每个占32位，IP地址。
```